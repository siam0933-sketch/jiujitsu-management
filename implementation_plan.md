# 명세서 및 구현 계획: 주짓수 도장 관리 SaaS 시스템

## 1. 프로젝트 목표
주짓수 도장 관리를 위한 멀티-테넌트(다중 도장 지원) SaaS 플랫폼을 구축합니다. 초보 개발자도 유지보수가 용이하도록 안정성이 높고 에러를 최소화할 수 있는 방식(Typescript, Next.js)을 사용합니다.

## 2. 사용자 역할 및 기능

### A. 슈퍼 관리자 (개발자/본인)
- **목표**: 플랫폼 전체 운영, 도장 관장님들로부터 시스템 이용료 수취, 시스템 업데이트 배포.
- **핵심 기능**:
    - 도장 등록 및 승인.
    - 구독 관리 (도장 과금).
    - 전체 시스템 설정 및 유지보수 모드.

### B. 관장 (Gym Owner)
- **목표**: 본인의 도장 운영, 회원 관리, 매출 확인.
- **핵심 기능**:
    - **대시보드**: 활성 회원 수, 월 매출, 금일 출석 현황 한눈에 보기.
    - **회원 관리**: 회원 등록, 수정, 삭제. 상세 정보(벨트 등급, 가입일 등) 확인.
    - **출석 관리**: 출석 로그 확인, 수업 시간표 설정.
    - **공지사항**: 회원들에게 공지 발송.
    - **수납 관리**: 회비 납부 현황 추적 (미납자 확인 등).

### C. 회원 (수강생)
- **목표**: 공지 확인, 수업 출석, 회비 납부(혹은 확인).
- **핵심 기능**:
    - **모바일 포털**: 스마트폰에서 접속하기 편한 UI.
    - **대시보드**: 도장 공지사항, 내 출석 기록, 승급(벨트) 현황.
    - **출석 체크**: QR 코드 혹은 간단한 '출석하기' 버튼 (위치 기반 혹은 시간 제한).
    - **결제**: 앱 내에서 월 회비 결제 (초기 단계에서는 선택 사항).


## 3. 기술 스택 선정 및 성능/확장성 분석 (Tech Stack & Scalability)

사용자분의 우려(**"회원이 많아지면 느려지지 않을까?"**)에 대한 답변과 대안 비교입니다.


### A. 추천 스택: **Next.js + Supabase** (최종 권장)
- **성능**: 넷플릭스, 틱톡 등에서 사용하는 검증된 프레임워크입니다.
- **배포 (Cloudtype)**: 사용자 요청에 따라 **한국어 UI**를 제공하는 국내 클라우드 서비스 **Cloudtype**을 사용합니다.
    - **장점**: 관리자 페이지가 모두 **한글**이라 유지보수가 편합니다. 무료 등급도 제공하며, Next.js 배포를 공식 지원합니다.
- **유지보수**: 프론트엔드/백엔드 코드가 한 곳에 있어, 혼자서 개발하고 고치기에 가장 빠르고 실수가 적습니다.

### B. 고려 가능한 대안 (Alternatives)

#### 대안 1: **React (Vite) + 별도 백엔드 (Node.js / Python)**
- **구조**: 화면(React)과 서버(Express/FastAPI)를 완전히 분리하여 개발.
- **장점**: 백엔드 로직이 매우 복잡할 때 유리할 수 있음.
- **단점 (비추천 사유)**:
    - **배포 복잡도**: 화면 따로, 서버 따로 2개를 배포하고 관리해야 합니다.
    - **통신 에러**: "CORS 에러" 등 초보자가 해결하기 까다로운 네트워크 문제가 자주 발생합니다.
    - **개발 속도**: 기능 하나를 만들 때마다 두 군데를 수정해야 해서 속도가 2배로 느려집니다.

#### 대안 2: **PHP (Laravel) 혹은 Java (Spring)**
- **구조**: 전통적인 서버 중심 개발.
- **장점**: 개발자 인력 구하기가 쉬움(한국 기준).
- **단점**: 서버를 직접 세팅하고 관리해야 해서, "시스템 유지보수" 작업이 매우 많아집니다.

### 결론
"혼자서", "에러 없이", "유지보수"를 하기에는 **Next.js**가 가장 안전하고 성능상으로도 충분합니다. 속도 저하는 프레임워크 문제가 아니라 **데이터베이스(Supabase)** 용량 문제인데, Supabase도 수십만 명까지는 문제없이 버티는 PostgreSQL 기반입니다.

## 4. 시스템 구조 (아키텍처)
- **멀티-테넌트 모델 (다중 도장 지원)**:
    - **도장 격리**: 모든 데이터는 `gym_id`를 가집니다. A도장의 데이터는 B도장에서 절대 볼 수 없습니다.
    - **접속 주소**:
        - `gym-system.com`: 서비스 소개 및 슈퍼 관리자 로그인.
        - 로그인 시 자동으로 해당 도장의 대시보드 혹은 회원 페이지로 이동.

## 5. 개발 전략 (에러 최소화)
1.  **TypeScript 사용**: 자바스크립트의 오타나 잘못된 데이터 접근을 코드를 실행하기도 전에 미리 잡아줍니다. 초보자일수록 필수입니다.
2.  **컴포넌트 우선 개발**: 작은 부품(버튼, 카드 등)부터 만들고 조립하는 방식으로 개발하여 복잡도를 줄입니다.
3.  **스키마 우선 설계**: 데이터베이스 구조(표)를 먼저 확실히 정하고 코딩을 시작합니다.

## 6. 초기 데이터베이스 설계 (초안)
- `profiles`: 사용자 정보 (ID, 이메일, 역할[관리자, 관장, 회원], 이름)
- `gyms`: 도장 정보 (ID, 도장명, 대표자ID, 구독 상태, 주소)
- `gym_members`: 도장 소속 정보 (ID, 도장ID, 프로필ID, 현재 벨트, 가입일, 상태)
- `attendance_logs`: 출석 기록 (ID, 회원ID, 도장ID, 날짜, 수업종류)
- `notices`: 공지사항 (ID, 도장ID, 제목, 내용, 작성일)

## 사용자 검토 필요 (User Review Required)


> [!IMPORTANT]
> **배포 플랫폼을 'Cloudtype(클라우드타입)'으로 변경했습니다.**
>
> 1. **한국어 지원**: 관리자 대시보드가 모두 한글이라 초보자가 관리하기 가장 쉽습니다.
> 2. **결제 기능**: 개발 속도를 위해 1단계는 **"관장님이 입금 내역 보고 수동 승인"** 하는 방식으로 먼저 만들고, 추후에 필요하면 실제 결제를 붙이는 것으로 진행하겠습니다.
>
> **이제 프로젝트 설정을 바로 시작해도 될까요?** (네 라고 답변주시면 바로 파일 생성을 시작합니다)
